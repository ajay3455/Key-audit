<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Key Audit System</title>
    <link rel="stylesheet" href="css/style.css"/>
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,500" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"/>
    <!-- jsPDF and jsPDF-AutoTable (CDN) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <!-- Guard Name Modal -->
    <div class="modal-overlay" id="nameModal">
        <div class="modal-content">
            <h2>Enter Guard Name</h2>
            <input type="text" id="guardNameInput" placeholder="Guard Name..." />
            <button id="saveGuardNameBtn">Save</button>
        </div>
    </div>

    <!-- Reset Confirmation Modal -->
    <div class="modal-overlay" id="resetModal">
        <div class="modal-content">
            <h2>Confirm Reset</h2>
            <p>This will clear all saved data. Continue?</p>
            <div class="modal-actions">
                <button id="confirmResetBtn" class="danger">Yes</button>
                <button id="cancelResetBtn">No</button>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div class="modal-overlay" id="helpModal">
        <div class="modal-content help-content">
            <h2>Help</h2>
            <ol>
                <li>Enter your name when prompted on the first visit.</li>
                <li>Use the search bar at the top to filter keys by tags or sets.</li>
                <li>Click on Good, Missing, Damaged, or Other to set the status of each key.</li>
                <li>If Other is selected, a notes field will appear. Update notes as needed.</li>
                <li>Watch the progress bar as you complete the audit.</li>
                <li>Use "Generate PDF Report" to download a full audit summary.</li>
                <li>Click "Reset Audit" to clear all data if necessary.</li>
            </ol>
            <button id="closeHelpBtn">Close</button>
        </div>
    </div>

    <header class="navbar">
        <div class="navbar-left">
            <span class="tooltip" data-tooltip="Building Name">
                <h1 id="buildingName">The Gloucester on Yonge</h1>
            </span>
            <span class="tooltip" data-tooltip="Guard Name">
                <h2 id="guardNameDisplay"></h2>
            </span>
            <span class="tooltip" data-tooltip="Date/Time">
                <h3 id="currentDateTime"></h3>
            </span>
        </div>
        <div class="navbar-right">
            <input type="text" id="searchInput" placeholder="Search keys by key tag or individual keysets...">
            <button id="helpBtn">Help</button>
            <button id="resetBtn">Reset Audit</button>
        </div>
    </header>

    <main>
        <div class="stats-container">
            <div class="progress-section">
                <div class="progress-bar-text">
                    <span id="progressPercentage">0%</span>
                </div>
                <div class="progress-bar" id="progressBar">
                    <div class="progress-bar-fill" id="progressFill"></div>
                </div>
            </div>
            <div class="pill-container">
                <div class="pill good-pill">
                    <i class="fas fa-check-circle"></i> Good: <span id="goodCount">0</span>
                </div>
                <div class="pill missing-pill">
                    <i class="fas fa-times-circle"></i> Missing: <span id="missingCount">0</span>
                </div>
                <div class="pill damaged-pill">
                    <i class="fas fa-exclamation-triangle"></i> Damaged: <span id="damagedCount">0</span>
                </div>
                <div class="pill other-pill">
                    <i class="fas fa-question-circle"></i> Other: <span id="otherCount">0</span>
                </div>
            </div>
            <button id="generatePDFBtn" class="pdf-btn">Generate PDF Report</button>
        </div>

        <div class="key-set-container" id="keySetsContainer">
            <!-- Key sets generated by JS -->
        </div>
    </main>

    <footer class="footer">
        <span>Â© 2023 Key Audit System</span>
    </footer>

    <script src="js/scripts.js"></script>
</body>
</html>
